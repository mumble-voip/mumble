///////////////////////////////////////////////////////////////////////////////
// Mumble Version Resource Script
// 
// Copyright (C) 2005-2020 The Mumble Developers
//
// This file is governed by a BSD-style license that can be found in the
// LICENSE file at the root of the Mumble source tree or at
// <https://www.mumble.info/LICENSE>.
//
// Description:
//   This resource script sets up the version information for the Mumble DLL.
//   It uses compile-time macros and placeholders to populate major/minor/patch
//   version fields, as well as debug, snapshot, and release metadata.
//
// Note:
//   - @PROJECT_VERSION@, @PROJECT_VERSION_MAJOR@, etc., are placeholders
//     typically replaced at build time (e.g. CMake, qmake, or another build
//     system).
//   - The blocks below define Windows-specific version information.
//
///////////////////////////////////////////////////////////////////////////////

#include <winver.h>

///////////////////////////////////////////////////////////////////////////////
// Define preprocessor macros for debug/release flags
///////////////////////////////////////////////////////////////////////////////

#ifndef DEBUG
#  define VER_DEBUG 0L
#else
#  define VER_DEBUG VS_FF_DEBUG
#endif

#ifdef SNAPSHOT_BUILD
#  define VER_RELEASE (VS_FF_SPECIALBUILD | VS_FF_PRERELEASE)
#else
#  define VER_RELEASE 0L
#endif

///////////////////////////////////////////////////////////////////////////////
// Version resource block
///////////////////////////////////////////////////////////////////////////////
VS_VERSION_INFO VERSIONINFO
 FILEVERSION     @PROJECT_VERSION_MAJOR@,@PROJECT_VERSION_MINOR@,@PROJECT_VERSION_PATCH@
 PRODUCTVERSION  @PROJECT_VERSION_MAJOR@,@PROJECT_VERSION_MINOR@,@PROJECT_VERSION_PATCH@

 // File flags for Windows
 FILEFLAGSMASK   VS_FFI_FILEFLAGSMASK
 FILEFLAGS       (VER_DEBUG | VER_RELEASE)

 // Indicate this build is for Windows (VOS_NT_WINDOWS32)
 FILEOS          VOS_NT_WINDOWS32
 // VFT_DLL means this resource is for a DLL file
 FILETYPE        VFT_DLL
 // FILESUBTYPE is 0 by default
 FILESUBTYPE     0L

BEGIN
    // "StringFileInfo" block
    BLOCK "StringFileInfo"
    BEGIN
        // Typical LCID (language code identifier) for US English with CP 1252
        BLOCK "040904E4"
        BEGIN
            // Basic string fields describing this file
            VALUE "CompanyName", "The Mumble Developers"
            VALUE "FileDescription", "Mumble - Low-latency VoIP client"
            VALUE "FileVersion", "@PROJECT_VERSION@"
            VALUE "ProductVersion", "@PROJECT_VERSION@"
            VALUE "LegalCopyright", "Copyright (c) 2005-@MUMBLE_BUILD_YEAR@ The Mumble Developers"
            VALUE "OriginalFilename", "mumble_ol_x64.dll"
            VALUE "ProductName", "Mumble"

#ifdef SNAPSHOT_BUILD
            VALUE "SpecialBuild", "Snapshot development release"
#endif
        END
    END

    // "VarFileInfo" block to store language/character-set info
    BLOCK "VarFileInfo"
    BEGIN
        VALUE "Translation", 0x0409, 1252
    END
END
